<!DOCTYPE html>
<html lang = "en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments :: head}"></head>
<body>

<nav th:replace="~{fragments :: header}"></nav>

<div class="container body-content">
    <h2>My Vacations</h2>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Vacations</th>
                    </tr>
                </thead>
                <tr th:each="vacation: ${vacations}">
                    <td th:text="${vacation.city}"></td>
                </tr>
            </table>

            <p th:unless="${vacations} and ${vacations.size()}">Oops! No vacations here.</p>
            <a th:href="@{'/add-vacation'}">Add Vacation</a>
            <a th:href="@{'/delete-vacation'}">Delete Vacation</a>
            <a th:href="@{'/edit-vacation'}">Edit Vacation</a>
            <a th:href="@{'/add-activity'}">Add Trip Inspiration</a>

</div> <br><br>

<!--TO-DO: Add favorite/like functionality-->

<!--TO-DO: Add number of likes-->

<!--TO-DO: Add dropdown select for vacations-->

<form id="countdownForm">
    <label for="countdownDate">Enter Countdown Date:</label>
    <input type="datetime-local" id="countdownDate" required>
    <button type="button" onclick="startCountdown()">Start Countdown</button>
</form>

<div id="countdownContainer" style="display: none;">
    <a data-type="countdown"
       data-name="Time for vacation in:"
       data-bg_color="#97B8FF"
       data-name_color="#008922"
       data-border_color="#888888"
       data-dt=""
       data-timezone="America/Chicago"
       style="display:block; left:0; width:80%; height:100px; position:relative; padding-bottom:0; margin:0 auto;"
       class="tickcounter"
       href="//www.tickcounter.com"
    >Countdown</a>
</div>

<script>
    function startCountdown() {

        userInputDate = document.getElementById('countdownDate').value;

        document.getElementById('countdownForm').style.display = 'none';

        document.querySelector('.tickcounter').setAttribute('data-dt', userInputDate);

        document.getElementById('countdownContainer').style.display = 'block';

        loadTickCounterScript();
    }

    function loadTickCounterScript() {

        (function(d, s, id) {
            var js, pjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//www.tickcounter.com/static/js/loader.js";
            pjs.parentNode.insertBefore(js, pjs);
        }(document, "script", "tickcounter-sdk"));
    }
</script>


<!-- TO-DO: Add weather API-->

<!-- TO-DO: Add local time API-->

<!-- TO-DO: Add Spotify API-->

<!--TO-DO: Add destinations. Could embed videos (Tik-Tok, YouTube, or ask user for photo and caption)-->
<section class="video-container" th:if="${activities.size()}">

    <div th:each="activity: ${activities}">
        <a th:href="${activity.url}">Trip Inspiration</a>
        <iframe width="560" height="315" src="${activity.embedUrl}" allowfullscreen></iframe>

    </div>

</section>

</body>
</html>